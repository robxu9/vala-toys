diff --git a/afrodite/parser.vala b/afrodite/parser.vala
index 71b685b..c2ac46d 100644
--- a/afrodite/parser.vala
+++ b/afrodite/parser.vala
@@ -52,9 +52,9 @@ namespace Afrodite
 				return;
 			}
 			if (source.content == null) 
-				source_file = new Vala.SourceFile (context, source.is_vapi ? SourceFileType.PACKAGE : SourceFileType.SOURCE, source.path); // normal source
+				source_file = new Vala.SourceFile (context, source.path, source.is_vapi); // normal source
 			else if (source.content != "") {
-				source_file = new Vala.SourceFile (context, source.is_vapi ? SourceFileType.PACKAGE : SourceFileType.SOURCE, source.path, source.content); // live buffer
+				source_file = new Vala.SourceFile (context, source.path, source.is_vapi, source.content); // live buffer
 				//Utils.trace ("queue live buffer %s:\n%s\n", source.path, source.content);
 			}
 			
diff --git a/afrodite/utils.vala b/afrodite/utils.vala
index 5e8975e..97eb44d 100644
--- a/afrodite/utils.vala
+++ b/afrodite/utils.vala
@@ -51,8 +51,7 @@ namespace Afrodite.Utils
 			ctx = new Vala.CodeContext();
 		}
 
-		ctx.vapi_directories = vapi_dirs;
-		var package_path = ctx.get_vapi_path (pkg);
+		var package_path = ctx.get_package_path (pkg, vapi_dirs);
 		if (package_path == null) {
 			return null;
 		}
diff --git a/configure b/configure
index 8ec4ef1..292142f 100755
--- a/configure
+++ b/configure
@@ -1,6 +1,6 @@
 #! /bin/sh
 # Guess values for system-dependent variables and create Makefiles.
-# Generated by GNU Autoconf 2.67 for vtg 0.11.0.
+# Generated by GNU Autoconf 2.67 for vtg 0.10.3beta2.
 #
 # Report bugs to <sejerpz@tin.it>.
 #
@@ -701,8 +701,8 @@ MAKEFLAGS=
 # Identity of this package.
 PACKAGE_NAME='vtg'
 PACKAGE_TARNAME='vtg'
-PACKAGE_VERSION='0.11.0'
-PACKAGE_STRING='vtg 0.11.0'
+PACKAGE_VERSION='0.10.3beta2'
+PACKAGE_STRING='vtg 0.10.3beta2'
 PACKAGE_BUGREPORT='sejerpz@tin.it'
 PACKAGE_URL=''
 
@@ -1504,7 +1504,7 @@ if test "$ac_init_help" = "long"; then
   # Omit some internal or obsolete options to make the list less imposing.
   # This message is too long to be a string in the A/UX 3.1 sh.
   cat <<_ACEOF
-\`configure' configures vtg 0.11.0 to adapt to many kinds of systems.
+\`configure' configures vtg 0.10.3beta2 to adapt to many kinds of systems.
 
 Usage: $0 [OPTION]... [VAR=VALUE]...
 
@@ -1574,7 +1574,7 @@ fi
 
 if test -n "$ac_init_help"; then
   case $ac_init_help in
-     short | recursive ) echo "Configuration of vtg 0.11.0:";;
+     short | recursive ) echo "Configuration of vtg 0.10.3beta2:";;
    esac
   cat <<\_ACEOF
 
@@ -1702,7 +1702,7 @@ fi
 test -n "$ac_init_help" && exit $ac_status
 if $ac_init_version; then
   cat <<\_ACEOF
-vtg configure 0.11.0
+vtg configure 0.10.3beta2
 generated by GNU Autoconf 2.67
 
 Copyright (C) 2010 Free Software Foundation, Inc.
@@ -2071,7 +2071,7 @@ cat >config.log <<_ACEOF
 This file contains any messages produced by compilers while
 running configure, to aid debugging if configure makes a mistake.
 
-It was created by vtg $as_me 0.11.0, which was
+It was created by vtg $as_me 0.10.3beta2, which was
 generated by GNU Autoconf 2.67.  Invocation command line was
 
   $ $0 $@
@@ -2889,7 +2889,7 @@ fi
 
 # Define the identity of the package.
  PACKAGE='vtg'
- VERSION='0.11.0'
+ VERSION='0.10.3beta2'
 
 
 cat >>confdefs.h <<_ACEOF
@@ -12012,7 +12012,7 @@ GTK_REQUIRED=2.18.0
 GEDIT_REQUIRED=2.28.0
 GTKSOURCEVIEW_REQUIRED=2.10.3
 VALA_REQUIRED=0.9.7
-VALA_VERSION=0.12
+VALA_VERSION=0.10
 GCONF_REQUIRED=2.22.0
 
 # Check whether --enable-debug was given.
@@ -12040,7 +12040,7 @@ if test "${with_vapidir+set}" = set; then :
 else
 
 		#standard vala installation
-	        VALA_VAPIDIR=$(pkg-config --variable=vapidir libvala-$VALA_VERSION)
+	        VALA_VAPIDIR=$(pkg-config --variable=vapidir vala-$VALA_VERSION)
 
 fi
 
@@ -12491,12 +12491,12 @@ if test -n "$AFRODITE_CFLAGS"; then
     pkg_cv_AFRODITE_CFLAGS="$AFRODITE_CFLAGS"
  elif test -n "$PKG_CONFIG"; then
     if test -n "$PKG_CONFIG" && \
-    { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"glib-2.0 >= \$GLIB_REQUIRED gio-2.0 >= \$GLIB_REQUIRED gobject-2.0 >= \$GLIB_REQUIRED gthread-2.0 >= \$GTHREAD_REQUIRED libvala-\$VALA_VERSION >= \$VALA_REQUIRED\""; } >&5
-  ($PKG_CONFIG --exists --print-errors "glib-2.0 >= $GLIB_REQUIRED gio-2.0 >= $GLIB_REQUIRED gobject-2.0 >= $GLIB_REQUIRED gthread-2.0 >= $GTHREAD_REQUIRED libvala-$VALA_VERSION >= $VALA_REQUIRED") 2>&5
+    { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"glib-2.0 >= \$GLIB_REQUIRED gio-2.0 >= \$GLIB_REQUIRED gobject-2.0 >= \$GLIB_REQUIRED gthread-2.0 >= \$GTHREAD_REQUIRED vala-\$VALA_VERSION >= \$VALA_REQUIRED\""; } >&5
+  ($PKG_CONFIG --exists --print-errors "glib-2.0 >= $GLIB_REQUIRED gio-2.0 >= $GLIB_REQUIRED gobject-2.0 >= $GLIB_REQUIRED gthread-2.0 >= $GTHREAD_REQUIRED vala-$VALA_VERSION >= $VALA_REQUIRED") 2>&5
   ac_status=$?
   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
   test $ac_status = 0; }; then
-  pkg_cv_AFRODITE_CFLAGS=`$PKG_CONFIG --cflags "glib-2.0 >= $GLIB_REQUIRED gio-2.0 >= $GLIB_REQUIRED gobject-2.0 >= $GLIB_REQUIRED gthread-2.0 >= $GTHREAD_REQUIRED libvala-$VALA_VERSION >= $VALA_REQUIRED" 2>/dev/null`
+  pkg_cv_AFRODITE_CFLAGS=`$PKG_CONFIG --cflags "glib-2.0 >= $GLIB_REQUIRED gio-2.0 >= $GLIB_REQUIRED gobject-2.0 >= $GLIB_REQUIRED gthread-2.0 >= $GTHREAD_REQUIRED vala-$VALA_VERSION >= $VALA_REQUIRED" 2>/dev/null`
 else
   pkg_failed=yes
 fi
@@ -12507,12 +12507,12 @@ if test -n "$AFRODITE_LIBS"; then
     pkg_cv_AFRODITE_LIBS="$AFRODITE_LIBS"
  elif test -n "$PKG_CONFIG"; then
     if test -n "$PKG_CONFIG" && \
-    { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"glib-2.0 >= \$GLIB_REQUIRED gio-2.0 >= \$GLIB_REQUIRED gobject-2.0 >= \$GLIB_REQUIRED gthread-2.0 >= \$GTHREAD_REQUIRED libvala-\$VALA_VERSION >= \$VALA_REQUIRED\""; } >&5
-  ($PKG_CONFIG --exists --print-errors "glib-2.0 >= $GLIB_REQUIRED gio-2.0 >= $GLIB_REQUIRED gobject-2.0 >= $GLIB_REQUIRED gthread-2.0 >= $GTHREAD_REQUIRED libvala-$VALA_VERSION >= $VALA_REQUIRED") 2>&5
+    { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"glib-2.0 >= \$GLIB_REQUIRED gio-2.0 >= \$GLIB_REQUIRED gobject-2.0 >= \$GLIB_REQUIRED gthread-2.0 >= \$GTHREAD_REQUIRED vala-\$VALA_VERSION >= \$VALA_REQUIRED\""; } >&5
+  ($PKG_CONFIG --exists --print-errors "glib-2.0 >= $GLIB_REQUIRED gio-2.0 >= $GLIB_REQUIRED gobject-2.0 >= $GLIB_REQUIRED gthread-2.0 >= $GTHREAD_REQUIRED vala-$VALA_VERSION >= $VALA_REQUIRED") 2>&5
   ac_status=$?
   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
   test $ac_status = 0; }; then
-  pkg_cv_AFRODITE_LIBS=`$PKG_CONFIG --libs "glib-2.0 >= $GLIB_REQUIRED gio-2.0 >= $GLIB_REQUIRED gobject-2.0 >= $GLIB_REQUIRED gthread-2.0 >= $GTHREAD_REQUIRED libvala-$VALA_VERSION >= $VALA_REQUIRED" 2>/dev/null`
+  pkg_cv_AFRODITE_LIBS=`$PKG_CONFIG --libs "glib-2.0 >= $GLIB_REQUIRED gio-2.0 >= $GLIB_REQUIRED gobject-2.0 >= $GLIB_REQUIRED gthread-2.0 >= $GTHREAD_REQUIRED vala-$VALA_VERSION >= $VALA_REQUIRED" 2>/dev/null`
 else
   pkg_failed=yes
 fi
@@ -12532,9 +12532,9 @@ else
         _pkg_short_errors_supported=no
 fi
         if test $_pkg_short_errors_supported = yes; then
-	        AFRODITE_PKG_ERRORS=`$PKG_CONFIG --short-errors --print-errors "glib-2.0 >= $GLIB_REQUIRED gio-2.0 >= $GLIB_REQUIRED gobject-2.0 >= $GLIB_REQUIRED gthread-2.0 >= $GTHREAD_REQUIRED libvala-$VALA_VERSION >= $VALA_REQUIRED" 2>&1`
+	        AFRODITE_PKG_ERRORS=`$PKG_CONFIG --short-errors --print-errors "glib-2.0 >= $GLIB_REQUIRED gio-2.0 >= $GLIB_REQUIRED gobject-2.0 >= $GLIB_REQUIRED gthread-2.0 >= $GTHREAD_REQUIRED vala-$VALA_VERSION >= $VALA_REQUIRED" 2>&1`
         else
-	        AFRODITE_PKG_ERRORS=`$PKG_CONFIG --print-errors "glib-2.0 >= $GLIB_REQUIRED gio-2.0 >= $GLIB_REQUIRED gobject-2.0 >= $GLIB_REQUIRED gthread-2.0 >= $GTHREAD_REQUIRED libvala-$VALA_VERSION >= $VALA_REQUIRED" 2>&1`
+	        AFRODITE_PKG_ERRORS=`$PKG_CONFIG --print-errors "glib-2.0 >= $GLIB_REQUIRED gio-2.0 >= $GLIB_REQUIRED gobject-2.0 >= $GLIB_REQUIRED gthread-2.0 >= $GTHREAD_REQUIRED vala-$VALA_VERSION >= $VALA_REQUIRED" 2>&1`
         fi
 	# Put the nasty error message in config.log where it belongs
 	echo "$AFRODITE_PKG_ERRORS" >&5
@@ -12588,19 +12588,19 @@ else
 $as_echo "    gthread-2.0 >= $GTHREAD_REQUIRED: not found" >&6; }
 fi
 			if test -n "$PKG_CONFIG" && \
-    { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"libvala-\$VALA_VERSION >= \$VALA_REQUIRED \""; } >&5
-  ($PKG_CONFIG --exists --print-errors "libvala-$VALA_VERSION >= $VALA_REQUIRED ") 2>&5
+    { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"vala-\$VALA_VERSION >= \$VALA_REQUIRED \""; } >&5
+  ($PKG_CONFIG --exists --print-errors "vala-$VALA_VERSION >= $VALA_REQUIRED ") 2>&5
   ac_status=$?
   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
   test $ac_status = 0; }; then
   :
 else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result:     libvala-$VALA_VERSION >= $VALA_REQUIRED: not found" >&5
-$as_echo "    libvala-$VALA_VERSION >= $VALA_REQUIRED: not found" >&6; }
+  { $as_echo "$as_me:${as_lineno-$LINENO}: result:     vala-$VALA_VERSION >= $VALA_REQUIRED: not found" >&5
+$as_echo "    vala-$VALA_VERSION >= $VALA_REQUIRED: not found" >&6; }
 fi
 
 			if test "x$afrodite" = xyes ; then
-				as_fn_error $? "afrodite library dependencies not met: glib-2.0 >= $GLIB_REQUIRED gio-2.0 >= $GLIB_REQUIRED gobject-2.0 >= $GLIB_REQUIRED gthread-2.0 >= $GTHREAD_REQUIRED libvala-$VALA_VERSION >= $VALA_REQUIRED" "$LINENO" 5
+				as_fn_error $? "afrodite library dependencies not met: glib-2.0 >= $GLIB_REQUIRED gio-2.0 >= $GLIB_REQUIRED gobject-2.0 >= $GLIB_REQUIRED gthread-2.0 >= $GTHREAD_REQUIRED vala-$VALA_VERSION >= $VALA_REQUIRED" "$LINENO" 5
 			fi
 
 elif test $pkg_failed = untried; then
@@ -12655,19 +12655,19 @@ else
 $as_echo "    gthread-2.0 >= $GTHREAD_REQUIRED: not found" >&6; }
 fi
 			if test -n "$PKG_CONFIG" && \
-    { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"libvala-\$VALA_VERSION >= \$VALA_REQUIRED \""; } >&5
-  ($PKG_CONFIG --exists --print-errors "libvala-$VALA_VERSION >= $VALA_REQUIRED ") 2>&5
+    { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"vala-\$VALA_VERSION >= \$VALA_REQUIRED \""; } >&5
+  ($PKG_CONFIG --exists --print-errors "vala-$VALA_VERSION >= $VALA_REQUIRED ") 2>&5
   ac_status=$?
   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
   test $ac_status = 0; }; then
   :
 else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result:     libvala-$VALA_VERSION >= $VALA_REQUIRED: not found" >&5
-$as_echo "    libvala-$VALA_VERSION >= $VALA_REQUIRED: not found" >&6; }
+  { $as_echo "$as_me:${as_lineno-$LINENO}: result:     vala-$VALA_VERSION >= $VALA_REQUIRED: not found" >&5
+$as_echo "    vala-$VALA_VERSION >= $VALA_REQUIRED: not found" >&6; }
 fi
 
 			if test "x$afrodite" = xyes ; then
-				as_fn_error $? "afrodite library dependencies not met: glib-2.0 >= $GLIB_REQUIRED gio-2.0 >= $GLIB_REQUIRED gobject-2.0 >= $GLIB_REQUIRED gthread-2.0 >= $GTHREAD_REQUIRED libvala-$VALA_VERSION >= $VALA_REQUIRED" "$LINENO" 5
+				as_fn_error $? "afrodite library dependencies not met: glib-2.0 >= $GLIB_REQUIRED gio-2.0 >= $GLIB_REQUIRED gobject-2.0 >= $GLIB_REQUIRED gthread-2.0 >= $GTHREAD_REQUIRED vala-$VALA_VERSION >= $VALA_REQUIRED" "$LINENO" 5
 			fi
 
 else
@@ -12713,7 +12713,7 @@ if test -n "$VTGPLUGIN_CFLAGS"; then
 		gtk+-2.0 >= \$GTK_REQUIRED
 		gtksourceview-2.0 >= \$GTKSOURCEVIEW_REQUIRED
 		gedit-2.20 >= \$GEDIT_REQUIRED
-		libvala-\$VALA_VERSION >= \$VALA_REQUIRED
+		vala-\$VALA_VERSION >= \$VALA_REQUIRED
 		gconf-2.0 >= \$GCONF_REQUIRED\""; } >&5
   ($PKG_CONFIG --exists --print-errors "glib-2.0 >= $GLIB_REQUIRED
 		gobject-2.0 >= $GLIB_REQUIRED
@@ -12721,7 +12721,7 @@ if test -n "$VTGPLUGIN_CFLAGS"; then
 		gtk+-2.0 >= $GTK_REQUIRED
 		gtksourceview-2.0 >= $GTKSOURCEVIEW_REQUIRED
 		gedit-2.20 >= $GEDIT_REQUIRED
-		libvala-$VALA_VERSION >= $VALA_REQUIRED
+		vala-$VALA_VERSION >= $VALA_REQUIRED
 		gconf-2.0 >= $GCONF_REQUIRED") 2>&5
   ac_status=$?
   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
@@ -12732,7 +12732,7 @@ if test -n "$VTGPLUGIN_CFLAGS"; then
 		gtk+-2.0 >= $GTK_REQUIRED
 		gtksourceview-2.0 >= $GTKSOURCEVIEW_REQUIRED
 		gedit-2.20 >= $GEDIT_REQUIRED
-		libvala-$VALA_VERSION >= $VALA_REQUIRED
+		vala-$VALA_VERSION >= $VALA_REQUIRED
 		gconf-2.0 >= $GCONF_REQUIRED" 2>/dev/null`
 else
   pkg_failed=yes
@@ -12750,7 +12750,7 @@ if test -n "$VTGPLUGIN_LIBS"; then
 		gtk+-2.0 >= \$GTK_REQUIRED
 		gtksourceview-2.0 >= \$GTKSOURCEVIEW_REQUIRED
 		gedit-2.20 >= \$GEDIT_REQUIRED
-		libvala-\$VALA_VERSION >= \$VALA_REQUIRED
+		vala-\$VALA_VERSION >= \$VALA_REQUIRED
 		gconf-2.0 >= \$GCONF_REQUIRED\""; } >&5
   ($PKG_CONFIG --exists --print-errors "glib-2.0 >= $GLIB_REQUIRED
 		gobject-2.0 >= $GLIB_REQUIRED
@@ -12758,7 +12758,7 @@ if test -n "$VTGPLUGIN_LIBS"; then
 		gtk+-2.0 >= $GTK_REQUIRED
 		gtksourceview-2.0 >= $GTKSOURCEVIEW_REQUIRED
 		gedit-2.20 >= $GEDIT_REQUIRED
-		libvala-$VALA_VERSION >= $VALA_REQUIRED
+		vala-$VALA_VERSION >= $VALA_REQUIRED
 		gconf-2.0 >= $GCONF_REQUIRED") 2>&5
   ac_status=$?
   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
@@ -12769,7 +12769,7 @@ if test -n "$VTGPLUGIN_LIBS"; then
 		gtk+-2.0 >= $GTK_REQUIRED
 		gtksourceview-2.0 >= $GTKSOURCEVIEW_REQUIRED
 		gedit-2.20 >= $GEDIT_REQUIRED
-		libvala-$VALA_VERSION >= $VALA_REQUIRED
+		vala-$VALA_VERSION >= $VALA_REQUIRED
 		gconf-2.0 >= $GCONF_REQUIRED" 2>/dev/null`
 else
   pkg_failed=yes
@@ -12796,7 +12796,7 @@ fi
 		gtk+-2.0 >= $GTK_REQUIRED
 		gtksourceview-2.0 >= $GTKSOURCEVIEW_REQUIRED
 		gedit-2.20 >= $GEDIT_REQUIRED
-		libvala-$VALA_VERSION >= $VALA_REQUIRED
+		vala-$VALA_VERSION >= $VALA_REQUIRED
 		gconf-2.0 >= $GCONF_REQUIRED" 2>&1`
         else
 	        VTGPLUGIN_PKG_ERRORS=`$PKG_CONFIG --print-errors "glib-2.0 >= $GLIB_REQUIRED
@@ -12805,7 +12805,7 @@ fi
 		gtk+-2.0 >= $GTK_REQUIRED
 		gtksourceview-2.0 >= $GTKSOURCEVIEW_REQUIRED
 		gedit-2.20 >= $GEDIT_REQUIRED
-		libvala-$VALA_VERSION >= $VALA_REQUIRED
+		vala-$VALA_VERSION >= $VALA_REQUIRED
 		gconf-2.0 >= $GCONF_REQUIRED" 2>&1`
         fi
 	# Put the nasty error message in config.log where it belongs
@@ -12882,15 +12882,15 @@ else
 $as_echo "    gtksourceview-2.0 >= $GTKSOURCEVIEW_REQUIRED: not found" >&6; }
 fi
 			if test -n "$PKG_CONFIG" && \
-    { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"libvala-\$VALA_VERSION >= \$VALA_REQUIRED \""; } >&5
-  ($PKG_CONFIG --exists --print-errors "libvala-$VALA_VERSION >= $VALA_REQUIRED ") 2>&5
+    { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"vala-\$VALA_VERSION >= \$VALA_REQUIRED \""; } >&5
+  ($PKG_CONFIG --exists --print-errors "vala-$VALA_VERSION >= $VALA_REQUIRED ") 2>&5
   ac_status=$?
   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
   test $ac_status = 0; }; then
   :
 else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result:     libvala-$VALA_VERSION >= $VALA_REQUIRED: not found" >&5
-$as_echo "    libvala-$VALA_VERSION >= $VALA_REQUIRED: not found" >&6; }
+  { $as_echo "$as_me:${as_lineno-$LINENO}: result:     vala-$VALA_VERSION >= $VALA_REQUIRED: not found" >&5
+$as_echo "    vala-$VALA_VERSION >= $VALA_REQUIRED: not found" >&6; }
 fi
 			if test -n "$PKG_CONFIG" && \
     { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"gconf-2.0 >= \$GCONF_REQUIRED \""; } >&5
@@ -12904,7 +12904,7 @@ else
 $as_echo "    gconf-2.0 >= $GCONF_REQUIRED: not found" >&6; }
 fi
 			if test "x$vtgplugin" = xyes ; then
-				as_fn_error $? "vtg-plugin dependencies not met: glib-2.0 >= $GLIB_REQUIRED gio-2.0 >= $GLIB_REQUIRED gobject-2.0 >= $GLIB_REQUIRED gthread-2.0 >= $GTHREAD_REQUIRED libvala-$VALA_VERSION >= $VALA_REQUIRED gtk+-2.0 >= $GTK_REQUIRED gtksourceview-2.0 >= $GTKSOURCEVIEW_REQUIRED gedit-2.20 >= $GEDIT_REQUIRED gconf-2.0 >= GCONF_REQUIRED" "$LINENO" 5
+				as_fn_error $? "vtg-plugin dependencies not met: glib-2.0 >= $GLIB_REQUIRED gio-2.0 >= $GLIB_REQUIRED gobject-2.0 >= $GLIB_REQUIRED gthread-2.0 >= $GTHREAD_REQUIRED vala-$VALA_VERSION >= $VALA_REQUIRED gtk+-2.0 >= $GTK_REQUIRED gtksourceview-2.0 >= $GTKSOURCEVIEW_REQUIRED gedit-2.20 >= $GEDIT_REQUIRED gconf-2.0 >= GCONF_REQUIRED" "$LINENO" 5
 			fi
 
 elif test $pkg_failed = untried; then
@@ -12981,15 +12981,15 @@ else
 $as_echo "    gtksourceview-2.0 >= $GTKSOURCEVIEW_REQUIRED: not found" >&6; }
 fi
 			if test -n "$PKG_CONFIG" && \
-    { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"libvala-\$VALA_VERSION >= \$VALA_REQUIRED \""; } >&5
-  ($PKG_CONFIG --exists --print-errors "libvala-$VALA_VERSION >= $VALA_REQUIRED ") 2>&5
+    { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"vala-\$VALA_VERSION >= \$VALA_REQUIRED \""; } >&5
+  ($PKG_CONFIG --exists --print-errors "vala-$VALA_VERSION >= $VALA_REQUIRED ") 2>&5
   ac_status=$?
   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
   test $ac_status = 0; }; then
   :
 else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result:     libvala-$VALA_VERSION >= $VALA_REQUIRED: not found" >&5
-$as_echo "    libvala-$VALA_VERSION >= $VALA_REQUIRED: not found" >&6; }
+  { $as_echo "$as_me:${as_lineno-$LINENO}: result:     vala-$VALA_VERSION >= $VALA_REQUIRED: not found" >&5
+$as_echo "    vala-$VALA_VERSION >= $VALA_REQUIRED: not found" >&6; }
 fi
 			if test -n "$PKG_CONFIG" && \
     { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"gconf-2.0 >= \$GCONF_REQUIRED \""; } >&5
@@ -13003,7 +13003,7 @@ else
 $as_echo "    gconf-2.0 >= $GCONF_REQUIRED: not found" >&6; }
 fi
 			if test "x$vtgplugin" = xyes ; then
-				as_fn_error $? "vtg-plugin dependencies not met: glib-2.0 >= $GLIB_REQUIRED gio-2.0 >= $GLIB_REQUIRED gobject-2.0 >= $GLIB_REQUIRED gthread-2.0 >= $GTHREAD_REQUIRED libvala-$VALA_VERSION >= $VALA_REQUIRED gtk+-2.0 >= $GTK_REQUIRED gtksourceview-2.0 >= $GTKSOURCEVIEW_REQUIRED gedit-2.20 >= $GEDIT_REQUIRED gconf-2.0 >= GCONF_REQUIRED" "$LINENO" 5
+				as_fn_error $? "vtg-plugin dependencies not met: glib-2.0 >= $GLIB_REQUIRED gio-2.0 >= $GLIB_REQUIRED gobject-2.0 >= $GLIB_REQUIRED gthread-2.0 >= $GTHREAD_REQUIRED vala-$VALA_VERSION >= $VALA_REQUIRED gtk+-2.0 >= $GTK_REQUIRED gtksourceview-2.0 >= $GTKSOURCEVIEW_REQUIRED gedit-2.20 >= $GEDIT_REQUIRED gconf-2.0 >= GCONF_REQUIRED" "$LINENO" 5
 			fi
 
 else
@@ -13592,7 +13592,7 @@ cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
 # report actual input values of CONFIG_FILES etc. instead of their
 # values after options handling.
 ac_log="
-This file was extended by vtg $as_me 0.11.0, which was
+This file was extended by vtg $as_me 0.10.3beta2, which was
 generated by GNU Autoconf 2.67.  Invocation command line was
 
   CONFIG_FILES    = $CONFIG_FILES
@@ -13658,7 +13658,7 @@ _ACEOF
 cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
 ac_cs_config="`$as_echo "$ac_configure_args" | sed 's/^ //; s/[\\""\`\$]/\\\\&/g'`"
 ac_cs_version="\\
-vtg config.status 0.11.0
+vtg config.status 0.10.3beta2
 configured by $0, generated by GNU Autoconf 2.67,
   with options \\"\$ac_cs_config\\"
 
diff --git a/configure.ac b/configure.ac
index 8a448c4..31efee1 100644
--- a/configure.ac
+++ b/configure.ac
@@ -1,4 +1,4 @@
-AC_INIT([vtg], [0.11.0], [sejerpz@tin.it], [vtg])
+AC_INIT([vtg], [0.10.3beta2], [sejerpz@tin.it], [vtg])
 AC_CONFIG_SRCDIR([Makefile.am])
 AC_CONFIG_HEADERS(config.h)
 AC_CONFIG_AUX_DIR([.])
@@ -32,7 +32,7 @@ GTK_REQUIRED=2.18.0
 GEDIT_REQUIRED=2.28.0
 GTKSOURCEVIEW_REQUIRED=2.10.3
 VALA_REQUIRED=0.9.7
-VALA_VERSION=0.12
+VALA_VERSION=0.10
 GCONF_REQUIRED=2.22.0
 
 AC_ARG_ENABLE(debug, AS_HELP_STRING([--enable-debug], [Enable debug messages]), enable_debug=$enableval, enable_debug=no)
@@ -42,7 +42,7 @@ AC_ARG_WITH([vapidir], AS_HELP_STRING([--with-vapidir=PATH],[use PATH for defaul
 	        VALA_VAPIDIR=$withval
 	],[
 		#standard vala installation
-	        VALA_VAPIDIR=$(pkg-config --variable=vapidir libvala-$VALA_VERSION)
+	        VALA_VAPIDIR=$(pkg-config --variable=vapidir vala-$VALA_VERSION)
 	])
 
 AC_DEFINE_UNQUOTED([VALA_VAPIDIR], ["$VALA_VAPIDIR"], [Vala vapi directory])
@@ -116,7 +116,7 @@ AM_CONDITIONAL([HAVE_GENPROJECT], [test "x$HAVE_GENPROJECT" = x1])
 
 if test "x${afrodite}" != xno ; then
 	PKG_CHECK_MODULES(AFRODITE, 
-		[glib-2.0 >= $GLIB_REQUIRED gio-2.0 >= $GLIB_REQUIRED gobject-2.0 >= $GLIB_REQUIRED gthread-2.0 >= $GTHREAD_REQUIRED libvala-$VALA_VERSION >= $VALA_REQUIRED],
+		[glib-2.0 >= $GLIB_REQUIRED gio-2.0 >= $GLIB_REQUIRED gobject-2.0 >= $GLIB_REQUIRED gthread-2.0 >= $GTHREAD_REQUIRED vala-$VALA_VERSION >= $VALA_REQUIRED],
 		HAVE_AFRODITE=1,
 		[
 			HAVE_AFRODITE=0
@@ -125,10 +125,10 @@ if test "x${afrodite}" != xno ; then
 			PKG_CHECK_EXISTS([gio-2.0 >= $GLIB_REQUIRED] ,, AC_MSG_RESULT([    gio-2.0 >= $GLIB_REQUIRED: not found]))
 			PKG_CHECK_EXISTS([gobject-2.0 >= $GLIB_REQUIRED] ,, AC_MSG_RESULT([    gobject-2.0 >= $GLIB_REQUIRED: not found]))
 			PKG_CHECK_EXISTS([gthread-2.0 >= $GTHREAD_REQUIRED] ,, AC_MSG_RESULT([    gthread-2.0 >= $GTHREAD_REQUIRED: not found]))
-			PKG_CHECK_EXISTS([libvala-$VALA_VERSION >= $VALA_REQUIRED] ,, AC_MSG_RESULT([    libvala-$VALA_VERSION >= $VALA_REQUIRED: not found]))
+			PKG_CHECK_EXISTS([vala-$VALA_VERSION >= $VALA_REQUIRED] ,, AC_MSG_RESULT([    vala-$VALA_VERSION >= $VALA_REQUIRED: not found]))
 
 			if test "x$afrodite" = xyes ; then
-				AC_MSG_ERROR([afrodite library dependencies not met: glib-2.0 >= $GLIB_REQUIRED gio-2.0 >= $GLIB_REQUIRED gobject-2.0 >= $GLIB_REQUIRED gthread-2.0 >= $GTHREAD_REQUIRED libvala-$VALA_VERSION >= $VALA_REQUIRED])
+				AC_MSG_ERROR([afrodite library dependencies not met: glib-2.0 >= $GLIB_REQUIRED gio-2.0 >= $GLIB_REQUIRED gobject-2.0 >= $GLIB_REQUIRED gthread-2.0 >= $GTHREAD_REQUIRED vala-$VALA_VERSION >= $VALA_REQUIRED])
 			fi
 		])
 else
@@ -152,7 +152,7 @@ if test "x${vtgplugin}" != xno ; then
 		gtk+-2.0 >= $GTK_REQUIRED 
 		gtksourceview-2.0 >= $GTKSOURCEVIEW_REQUIRED 
 		gedit-2.20 >= $GEDIT_REQUIRED 
-		libvala-$VALA_VERSION >= $VALA_REQUIRED 
+		vala-$VALA_VERSION >= $VALA_REQUIRED 
 		gconf-2.0 >= $GCONF_REQUIRED],
 		HAVE_VTGPLUGIN=1,
 		[
@@ -164,10 +164,10 @@ if test "x${vtgplugin}" != xno ; then
 			PKG_CHECK_EXISTS([gtk+-2.0 >= $GTK_REQUIRED] ,, AC_MSG_RESULT([    gtk+-2.0 >= $GTK_REQUIRED: not found]))
 			PKG_CHECK_EXISTS([gedit-2.20 >= $GEDIT_REQUIRED] ,, AC_MSG_RESULT([    gedit-2.20 >= $GEDIT_REQUIRED: not found]))
 			PKG_CHECK_EXISTS([gtksourceview-2.0 >= $GTKSOURCEVIEW_REQUIRED] ,, AC_MSG_RESULT([    gtksourceview-2.0 >= $GTKSOURCEVIEW_REQUIRED: not found]))
-			PKG_CHECK_EXISTS([libvala-$VALA_VERSION >= $VALA_REQUIRED] ,, AC_MSG_RESULT([    libvala-$VALA_VERSION >= $VALA_REQUIRED: not found]))
+			PKG_CHECK_EXISTS([vala-$VALA_VERSION >= $VALA_REQUIRED] ,, AC_MSG_RESULT([    vala-$VALA_VERSION >= $VALA_REQUIRED: not found]))
 			PKG_CHECK_EXISTS([gconf-2.0 >= $GCONF_REQUIRED] ,, AC_MSG_RESULT([    gconf-2.0 >= $GCONF_REQUIRED: not found]))
 			if test "x$vtgplugin" = xyes ; then
-				AC_MSG_ERROR([vtg-plugin dependencies not met: glib-2.0 >= $GLIB_REQUIRED gio-2.0 >= $GLIB_REQUIRED gobject-2.0 >= $GLIB_REQUIRED gthread-2.0 >= $GTHREAD_REQUIRED libvala-$VALA_VERSION >= $VALA_REQUIRED gtk+-2.0 >= $GTK_REQUIRED gtksourceview-2.0 >= $GTKSOURCEVIEW_REQUIRED gedit-2.20 >= $GEDIT_REQUIRED gconf-2.0 >= GCONF_REQUIRED])
+				AC_MSG_ERROR([vtg-plugin dependencies not met: glib-2.0 >= $GLIB_REQUIRED gio-2.0 >= $GLIB_REQUIRED gobject-2.0 >= $GLIB_REQUIRED gthread-2.0 >= $GTHREAD_REQUIRED vala-$VALA_VERSION >= $VALA_REQUIRED gtk+-2.0 >= $GTK_REQUIRED gtksourceview-2.0 >= $GTKSOURCEVIEW_REQUIRED gedit-2.20 >= $GEDIT_REQUIRED gconf-2.0 >= GCONF_REQUIRED])
 			fi
 		])
 else
diff --git a/vbf/vbf-1.0.vapi b/vbf/vbf-1.0.vapi
index 691be46..b647ce7 100644
--- a/vbf/vbf-1.0.vapi
+++ b/vbf/vbf-1.0.vapi
@@ -1,4 +1,4 @@
-/* vbf-1.0.vapi generated by valac 0.9.7.169-a68e, do not modify. */
+/* vbf-1.0.vapi generated by valac 0.10.0, do not modify. */
 
 [CCode (cprefix = "Vbf", lower_case_cprefix = "vbf_")]
 namespace Vbf {
diff --git a/vbf/vbfpackage.vala b/vbf/vbfpackage.vala
index 8f2695b..80f9104 100644
--- a/vbf/vbfpackage.vala
+++ b/vbf/vbfpackage.vala
@@ -68,8 +68,7 @@ namespace Vbf
 			}
 			
 			try {
-				ctx.vapi_directories = vapi_dirs;
-				string package_filename = ctx.get_vapi_path (id);
+				string package_filename = ctx.get_package_path (id, vapi_dirs);
 				if (package_filename == null) {
 					critical ("no vapi file for package: %s", id);
 				} else {
diff --git a/vtg/vtgbuildlogview.vala b/vtg/vtgbuildlogview.vala
index cf996fe..cd2cd92 100644
--- a/vtg/vtgbuildlogview.vala
+++ b/vtg/vtgbuildlogview.vala
@@ -114,7 +114,7 @@ namespace Vtg
 			_vala_warning_button = new Gtk.ToggleToolButton ();
 			_vala_warning_button.set_label (_("Warnings"));
 			_vala_warning_button.set_is_important (true);
-			_vala_warning_button.set_icon_name (Gtk.Stock.DIALOG_WARNING);
+			_vala_warning_button.set_icon_name (Gtk.STOCK_DIALOG_WARNING);
 			_vala_warning_button.set_active (true);
 			
 			
@@ -125,7 +125,7 @@ namespace Vtg
 			_vala_error_button = new Gtk.ToggleToolButton ();
 			_vala_error_button.set_label (_("Errors"));
 			_vala_error_button.set_is_important (true);
-			_vala_error_button.set_icon_name (Gtk.Stock.DIALOG_ERROR);
+			_vala_error_button.set_icon_name (Gtk.STOCK_DIALOG_ERROR);
 			_vala_error_button.toggled.connect (on_toggle_vala_errors_toggled);
 			_vala_error_button.set_tooltip_text (_("Show or hide the errors from the build result view"));
 			_vala_error_button.set_active (true);
@@ -139,7 +139,7 @@ namespace Vtg
 			_c_warning_button = new Gtk.ToggleToolButton ();
 			_c_warning_button.set_label (_("C Warnings"));
 			_c_warning_button.set_is_important (true);
-			_c_warning_button.set_icon_name (Gtk.Stock.DIALOG_WARNING);
+			_c_warning_button.set_icon_name (Gtk.STOCK_DIALOG_WARNING);
 			_c_warning_button.set_active (_show_c_warnings);
 			
 			_c_warning_button.toggled.connect (on_toggle_c_warnings_toggled);
@@ -149,7 +149,7 @@ namespace Vtg
 			_c_error_button = new Gtk.ToggleToolButton ();
 			_c_error_button.set_label (_("C Errors"));
 			_c_error_button.set_is_important (true);
-			_c_error_button.set_icon_name (Gtk.Stock.DIALOG_ERROR);
+			_c_error_button.set_icon_name (Gtk.STOCK_DIALOG_ERROR);
 			_c_error_button.toggled.connect (on_toggle_c_errors_toggled);
 			_c_error_button.set_tooltip_text (_("Show or hide the C errors from the build result view"));
 			_c_error_button.set_active (true);
@@ -196,7 +196,7 @@ namespace Vtg
 			scroll.add (_build_view);
 			_ui.pack_start (scroll, true, true, 0);
 			_ui.show_all ();
-			panel.add_item_with_stock_icon (_ui, _("Build results"), Gtk.Stock.EXECUTE);
+			panel.add_item_with_stock_icon (_ui, _("Build results"), Gtk.STOCK_EXECUTE);
 			_plugin_instance.output_view.message_added.connect (this.on_message_added);
 			_child_model.set_sort_column_id (5, SortType.ASCENDING);
 			
@@ -457,11 +457,11 @@ namespace Vtg
 				if (parts[2] != null) {
 					int is_warning = 0;
 					if (parts[1].has_suffix ("error")) {
-						stock_id = Gtk.Stock.DIALOG_ERROR;
+						stock_id = Gtk.STOCK_DIALOG_ERROR;
 						_vala_error_count++;
 						is_warning = 0; //errors come first
 					} else if (parts[1].has_suffix ("warning")) {
-						stock_id = Gtk.Stock.DIALOG_WARNING;
+						stock_id = Gtk.STOCK_DIALOG_WARNING;
 						_vala_warning_count++;
 						is_warning = 1;
 					} else {
@@ -530,11 +530,11 @@ namespace Vtg
 						message_text = parts[2];
 					}
 					if (message_type.has_suffix ("error")) {
-						stock_id = Gtk.Stock.DIALOG_ERROR;
+						stock_id = Gtk.STOCK_DIALOG_ERROR;
 						_c_error_count++;
 						is_warning = 0; //errors come first
 					} else if (message_type.has_suffix ("warning")) {
-						stock_id = Gtk.Stock.DIALOG_WARNING;
+						stock_id = Gtk.STOCK_DIALOG_WARNING;
 						_c_warning_count++;
 						is_warning = 1;
 					} else if (!message_type.chomp().has_suffix ("note")) {
diff --git a/vtg/vtgprojectmanager.vala b/vtg/vtgprojectmanager.vala
index bdcfd0f..dd240a9 100644
--- a/vtg/vtgprojectmanager.vala
+++ b/vtg/vtgprojectmanager.vala
@@ -456,9 +456,9 @@ namespace Vtg
 			_model = new Gtk.TreeStore (5, typeof(string), typeof(string), typeof(string), typeof(GLib.Object), typeof(string));
 			_model.append (out project_iter, null);
 			if (StringUtils.is_null_or_empty (_project.version)) {
-				_model.set (project_iter, 0, Gtk.Stock.DIRECTORY, 1, "%s".printf (_project.name), 2, "project-root", 4, "");
+				_model.set (project_iter, 0, Gtk.STOCK_DIRECTORY, 1, "%s".printf (_project.name), 2, "project-root", 4, "");
 			} else {
-				_model.set (project_iter, 0, Gtk.Stock.DIRECTORY, 1, "%s - %s".printf (_project.name, _project.version), 2, "project-root", 4, "");
+				_model.set (project_iter, 0, Gtk.STOCK_DIRECTORY, 1, "%s - %s".printf (_project.name, _project.version), 2, "project-root", 4, "");
 			}
 			
 			bool reference_added = false;
@@ -466,20 +466,20 @@ namespace Vtg
 			foreach (Module module in _project.get_modules ()) {
 				if (!reference_added) {
 					_model.append (out modules_iter, project_iter);
-					_model.set (modules_iter, 0, Gtk.Stock.DIRECTORY, 1, _("References"), 2, "project-reference", 4, "1");
+					_model.set (modules_iter, 0, Gtk.STOCK_DIRECTORY, 1, _("References"), 2, "project-reference", 4, "1");
 					reference_added = true;
 				}
 				TreeIter module_iter;
 				_model.append (out module_iter, modules_iter);
-				_model.set (module_iter, 0, Gtk.Stock.DIRECTORY, 1, module.name, 2, module.id, 3, module, 4, module.name);
+				_model.set (module_iter, 0, Gtk.STOCK_DIRECTORY, 1, module.name, 2, module.id, 3, module, 4, module.name);
 				foreach (Package package in module.get_packages ()) {
 					TreeIter package_iter;
 					_model.append (out package_iter, module_iter);
-					_model.set (package_iter, 0, Gtk.Stock.FILE, 1, package.name, 2, package.id, 3, package, 4, package.name);
+					_model.set (package_iter, 0, Gtk.STOCK_FILE, 1, package.name, 2, package.id, 3, package, 4, package.name);
 				}
 			}
 			_model.append (out groups_iter, project_iter);
-			_model.set (groups_iter, 0, Gtk.Stock.DIRECTORY, 1, _("Files"), 2, "project-files", 4, "2");
+			_model.set (groups_iter, 0, Gtk.STOCK_DIRECTORY, 1, _("Files"), 2, "project-files", 4, "2");
 			foreach (Group group in _project.get_groups ()) {
 				bool group_added = false;
 				
@@ -499,7 +499,7 @@ namespace Vtg
 
 							if (!group_added) {
 								_model.append (out group_iter, groups_iter);
-								_model.set (group_iter, 0, Gtk.Stock.DIRECTORY, 1, group.name, 2, "group-targets", 3, group, 4, "2");
+								_model.set (group_iter, 0, Gtk.STOCK_DIRECTORY, 1, group.name, 2, "group-targets", 3, group, 4, "2");
 								group_added = true;
 							}
 							if (!target_added) {
@@ -509,12 +509,12 @@ namespace Vtg
 							}
 							TreeIter source_iter;
 							_model.append (out source_iter, target_iter);
-							_model.set (source_iter, 0, Gtk.Stock.FILE, 1, source.name, 2, source.uri, 3, source, 4, source.name);
+							_model.set (source_iter, 0, Gtk.STOCK_FILE, 1, source.name, 2, source.uri, 3, source, 4, source.name);
 						}
 						foreach (Vbf.File file in target.get_files ()) {
 							if (!group_added) {
 								_model.append (out group_iter, groups_iter);
-								_model.set (group_iter, 0, Gtk.Stock.DIRECTORY, 1, group.name, 2, "group-targets", 3, group, 4, "2");
+								_model.set (group_iter, 0, Gtk.STOCK_DIRECTORY, 1, group.name, 2, "group-targets", 3, group, 4, "2");
 								group_added = true;
 							}
 							if (!target_added) {
@@ -525,20 +525,20 @@ namespace Vtg
 
 							TreeIter file_iter;
 							_model.append (out file_iter, target_iter);
-							_model.set (file_iter, 0, Gtk.Stock.FILE, 1, file.name, 2, file.uri, 3, file, 4, file.name);
+							_model.set (file_iter, 0, Gtk.STOCK_FILE, 1, file.name, 2, file.uri, 3, file, 4, file.name);
 						}
 						
 						bool vapi_group_added = false;
 						foreach (Vbf.Package package in target.get_packages ()) {
 							if (!vapi_group_added) {
 								_model.append (out vapi_group_iter, target_iter);
-								_model.set (vapi_group_iter, 0, Gtk.Stock.DIRECTORY, 1, _("Referenced packages"), 2, "vapi-targets", 3, null, 4, "2");
+								_model.set (vapi_group_iter, 0, Gtk.STOCK_DIRECTORY, 1, _("Referenced packages"), 2, "vapi-targets", 3, null, 4, "2");
 								vapi_group_added = true;
 							}
 							
 							TreeIter vapi_iter;
 							_model.append (out vapi_iter, vapi_group_iter);
-							_model.set (vapi_iter, 0, Gtk.Stock.FILE, 1, package.name, 2, package.uri, 3, package, 4, package.name);
+							_model.set (vapi_iter, 0, Gtk.STOCK_FILE, 1, package.name, 2, package.uri, 3, package, 4, package.name);
 						}
 					}
 					
diff --git a/vtg/vtgprojectmanagerui.vala b/vtg/vtgprojectmanagerui.vala
index 50744a6..b04310f 100644
--- a/vtg/vtgprojectmanagerui.vala
+++ b/vtg/vtgprojectmanagerui.vala
@@ -138,22 +138,22 @@ namespace Vtg
 			{"ProjectClose", null, N_("_Close Current Project"), null, N_("Close current selected project"), on_project_close},
 			{"ProjectChange", null, N_("_Change Current Project"), null, N_("Change current selected project"), on_project_change},
 			{"ProjectBuildMenuAction", null, N_("Build"), null, N_("Build menu"), null},
-			{"ProjectBuild", Gtk.Stock.EXECUTE, N_("_Build Project"), "<control><shift>B", N_("Build the current project"), on_project_build},
-			{"ProjectBuildClean", Gtk.Stock.CLEAR, N_("_Clean Project"), null, N_("Clean the current project"), on_project_clean},
+			{"ProjectBuild", Gtk.STOCK_EXECUTE, N_("_Build Project"), "<control><shift>B", N_("Build the current project"), on_project_build},
+			{"ProjectBuildClean", Gtk.STOCK_CLEAR, N_("_Clean Project"), null, N_("Clean the current project"), on_project_clean},
 			{"ProjectBuildConfigure", null, N_("C_onfigure Project"), null, N_("Configure or reconfigure the current project"), on_project_configure},
 			{"ProjectBuildCompileFile", null, N_("_Compile File"), "<control>B", N_("Compile the current file with the vala compiler"), on_standalone_file_compile},
-			{"ProjectBuildStopCompilation", Gtk.Stock.STOP, N_("_Stop Compilation"), "<control>B", N_("Stop the running compilation"), on_stop_compilation},
-			{"ProjectBuildNextError", Gtk.Stock.GO_FORWARD, N_("_Next Error"), "<control><shift>F12", N_("Go to next error source line"), on_project_error_next},
-			{"ProjectBuildPreviousError", Gtk.Stock.GO_BACK, N_("_Previuos Error"), null, N_("Go to previous error source line"), on_project_error_previuos},
-			{"ProjectBuildExecute", Gtk.Stock.EXECUTE, N_("_Execute"), "F5", N_("Excute target program"), on_project_execute_process},
-			{"ProjectBuildKill", Gtk.Stock.STOP, N_("_Stop process"), null, N_("Stop (kill) executing program"), on_project_kill_process},
-			{"ProjectSearch", Gtk.Stock.FIND, N_("Find In _Project..."), "<control><shift>F", N_("Search for text in all the project files"), on_project_search},
+			{"ProjectBuildStopCompilation", Gtk.STOCK_STOP, N_("_Stop Compilation"), "<control>B", N_("Stop the running compilation"), on_stop_compilation},
+			{"ProjectBuildNextError", Gtk.STOCK_GO_FORWARD, N_("_Next Error"), "<control><shift>F12", N_("Go to next error source line"), on_project_error_next},
+			{"ProjectBuildPreviousError", Gtk.STOCK_GO_BACK, N_("_Previuos Error"), null, N_("Go to previous error source line"), on_project_error_previuos},
+			{"ProjectBuildExecute", Gtk.STOCK_EXECUTE, N_("_Execute"), "F5", N_("Excute target program"), on_project_execute_process},
+			{"ProjectBuildKill", Gtk.STOCK_STOP, N_("_Stop process"), null, N_("Stop (kill) executing program"), on_project_kill_process},
+			{"ProjectSearch", Gtk.STOCK_FIND, N_("Find In _Project..."), "<control><shift>F", N_("Search for text in all the project files"), on_project_search},
 			{"ProjectSearchNextResult", null, N_("Find N_ext In Project"), null, N_("Search forward for the same text in all the project files"), on_project_search_result_next},
 			{"ProjectSearchPrevResult", null, N_("Find Previ_ous In Project"), null, N_("Search backward for the same text in all the project files"), on_project_search_result_previous},
 			{"ProjectSearchSymbol", null, N_("Find Symbol In Project..."), "<control><alt>M", N_("Search a symbol in all the project files"), on_project_search_symbol},
-			{"ProjectGotoDocument", Gtk.Stock.JUMP_TO, N_("_Go To Document..."), "<control>J", N_("Open a document that belong to this project"), on_project_goto_document},
-			{"ProjectGotoNextPosition", Gtk.Stock.GO_FORWARD, N_("_Go To Next Source Position"), null, N_("Go to the next source position"), on_project_goto_next_position},
-			{"ProjectGotoPrevPosition", Gtk.Stock.GO_BACK, N_("_Go To Previous Source Position"), "<alt>Left", N_("Go to the previous or last saved source position"), on_project_goto_prev_position},
+			{"ProjectGotoDocument", Gtk.STOCK_JUMP_TO, N_("_Go To Document..."), "<control>J", N_("Open a document that belong to this project"), on_project_goto_document},
+			{"ProjectGotoNextPosition", Gtk.STOCK_GO_FORWARD, N_("_Go To Next Source Position"), null, N_("Go to the next source position"), on_project_goto_next_position},
+			{"ProjectGotoPrevPosition", Gtk.STOCK_GO_BACK, N_("_Go To Previous Source Position"), "<alt>Left", N_("Go to the previous or last saved source position"), on_project_goto_prev_position},
 			{"ProjectGotoSymbol", null, N_("_Go To Symbol..."), "<control>M", N_("Goto to a specific symbol in the current source document"), on_project_goto_symbol},
 			{"ProjectGotoDefinition", null, N_("_Go To Definition"), "F12", N_("Goto to a current symbol definition"), on_project_goto_definition},
 			{"ProjectGotoOuterScope", null, N_("_Go To Outer Scope"), "<control>F12", N_("Goto to the method or class containing the cursor"), on_project_goto_outerscope},
@@ -361,8 +361,8 @@ namespace Vtg
 			var dialog = new Gtk.FileChooserDialog (_("Open Project"),
 				      _plugin_instance.window,
 				      Gtk.FileChooserAction.SELECT_FOLDER,
-				      Gtk.Stock.CANCEL, ResponseType.CANCEL,
-				      Gtk.Stock.OPEN, ResponseType.ACCEPT,
+				      Gtk.STOCK_CANCEL, ResponseType.CANCEL,
+				      Gtk.STOCK_OPEN, ResponseType.ACCEPT,
 				      null);
 
 			if (dialog.run () == ResponseType.ACCEPT) {
@@ -391,9 +391,9 @@ namespace Vtg
                                   Gtk.MessageType.QUESTION,
                                   ButtonsType.NONE,
 				    _("Project files need to be saved"));
-				dialog.add_buttons (Gtk.Stock.CLOSE, ResponseType.CLOSE,
-				    Gtk.Stock.CANCEL, ResponseType.CANCEL,
-				    Gtk.Stock.SAVE, ResponseType.ACCEPT);
+				dialog.add_buttons (Gtk.STOCK_CLOSE, ResponseType.CLOSE,
+				    Gtk.STOCK_CANCEL, ResponseType.CANCEL,
+				    Gtk.STOCK_SAVE, ResponseType.ACCEPT);
 				var response = dialog.run ();
 				dialog.destroy ();
 				if (response == ResponseType.CANCEL) {
@@ -435,7 +435,7 @@ namespace Vtg
 					FilteredListDialogColumns.VISIBILITY, true, 
 					FilteredListDialogColumns.OBJECT, prj,
 					FilteredListDialogColumns.ICON, 
-						image.render_icon (Gtk.Stock.FILE, IconSize.BUTTON, ""),
+						image.render_icon (Gtk.STOCK_FILE, IconSize.BUTTON, ""),
 					FilteredListDialogColumns.SELECTABLE, true);
 			}
 			
@@ -456,8 +456,8 @@ namespace Vtg
 			var dialog = new Gtk.FileChooserDialog (_("Save Project"),
 				      _plugin_instance.window,
 				      Gtk.FileChooserAction.SELECT_FOLDER,
-				      Gtk.Stock.CANCEL, ResponseType.CANCEL,
-				      Gtk.Stock.SAVE, ResponseType.ACCEPT,
+				      Gtk.STOCK_CANCEL, ResponseType.CANCEL,
+				      Gtk.STOCK_SAVE, ResponseType.ACCEPT,
 				      null);
 			string foldername = null;
 
@@ -588,7 +588,7 @@ namespace Vtg
 								FilteredListDialogColumns.MARKUP, src.name, 
 								FilteredListDialogColumns.VISIBILITY, true, 
 								FilteredListDialogColumns.OBJECT, src,
-								FilteredListDialogColumns.ICON, image.render_icon (Gtk.Stock.FILE, IconSize.BUTTON, ""),
+								FilteredListDialogColumns.ICON, image.render_icon (Gtk.STOCK_FILE, IconSize.BUTTON, ""),
 								FilteredListDialogColumns.SELECTABLE, true);
 						}
 					}
diff --git a/vtg/vtgprojectsearchresultsview.vala b/vtg/vtgprojectsearchresultsview.vala
index bfbd192..48c3819 100644
--- a/vtg/vtgprojectsearchresultsview.vala
+++ b/vtg/vtgprojectsearchresultsview.vala
@@ -71,7 +71,7 @@ namespace Vtg
 			scroll.add (_results_view);
 			_ui.pack_start (scroll, true, true, 0);
 			_ui.show_all ();
-			panel.add_item_with_stock_icon (_ui, _("Search results"), Gtk.Stock.FIND);
+			panel.add_item_with_stock_icon (_ui, _("Search results"), Gtk.STOCK_FIND);
 			_plugin_instance.output_view.message_added.connect (this.on_message_added);
 			_model.set_sort_column_id (0, SortType.ASCENDING);
 		}
diff --git a/vtg/vtgprojectview.vala b/vtg/vtgprojectview.vala
index ba52d89..ba55684 100644
--- a/vtg/vtgprojectview.vala
+++ b/vtg/vtgprojectview.vala
@@ -57,8 +57,8 @@ namespace Vtg
 
 
 		const ActionEntry[] _action_entries = {
-			{"packages-open-configure", Gtk.Stock.OPEN, N_("Open configure file..."), "<control><shift>C", N_("Open configure.ac file"), on_packages_open_configure},
-			{"target-open-makefile", Gtk.Stock.OPEN, N_("Open makefile"), "<control><shift>M", N_("Open makefile.am file"), on_target_open_makefile}
+			{"packages-open-configure", Gtk.STOCK_OPEN, N_("Open configure file..."), "<control><shift>C", N_("Open configure.ac file"), on_packages_open_configure},
+			{"target-open-makefile", Gtk.STOCK_OPEN, N_("Open makefile"), "<control><shift>M", N_("Open makefile.am file"), on_target_open_makefile}
 		};
 
 
@@ -137,7 +137,7 @@ namespace Vtg
 			_side_panel.pack_start (scroll, true, true, 4);
 			_side_panel.pack_start (_check_button_show_sources, false, false, 4);
 			_side_panel.show_all ();
-			panel.add_item_with_stock_icon (_side_panel, _("Projects"), Gtk.Stock.DIRECTORY);
+			panel.add_item_with_stock_icon (_side_panel, _("Projects"), Gtk.STOCK_DIRECTORY);
 			panel.activate_item (_side_panel);
 			_project_count = 0;
 
diff --git a/vtg/vtgsourceoutlinerview.vala b/vtg/vtgsourceoutlinerview.vala
index 0125e46..317a026 100644
--- a/vtg/vtgsourceoutlinerview.vala
+++ b/vtg/vtgsourceoutlinerview.vala
@@ -64,7 +64,7 @@ namespace Vtg
                                         </ui>""";
 
 		const ActionEntry[] _action_entries = {
-			{"source-outliner-goto", Gtk.Stock.OPEN, N_("Goto definition..."), null, N_("Goto symbol definition"), on_source_outliner_goto}
+			{"source-outliner-goto", Gtk.STOCK_OPEN, N_("Goto definition..."), null, N_("Goto symbol definition"), on_source_outliner_goto}
 		};
 
 		private Gtk.ActionGroup _actions;
diff --git a/vtg/vtgsymbolcompletionprovider.vala b/vtg/vtgsymbolcompletionprovider.vala
index 802faea..6a9cdb4 100644
--- a/vtg/vtgsymbolcompletionprovider.vala
+++ b/vtg/vtgsymbolcompletionprovider.vala
@@ -240,7 +240,7 @@ namespace Vtg
 			{
 				try {
 					Gtk.IconTheme theme = Gtk.IconTheme.get_default ();
-					_icon = theme.load_icon (Gtk.Stock.DIALOG_INFO, 16, 0);
+					_icon = theme.load_icon (Gtk.STOCK_DIALOG_INFO, 16, 0);
 				} catch (Error err) {
 					critical ("error: %s", err.message);
 				}
@@ -530,9 +530,12 @@ namespace Vtg
 			_proposals.sort (this.proposal_sort);
 		}
 
-		private static int proposal_sort (Gtk.SourceCompletionItem a, Gtk.SourceCompletionItem b)
+		private static int proposal_sort (void* a, void* b)
 		{
-			return strcmp (a.get_label (), b.get_label ());
+			var item_a = (Gtk.SourceCompletionItem)a;
+			var item_b = (Gtk.SourceCompletionItem)b;
+
+			return strcmp (item_a.get_label (), item_b.get_label ());
 		}
 
 		private void transform_result (Afrodite.QueryOptions? options, Afrodite.QueryResult? result)
diff --git a/vtg/vtgutils.vala b/vtg/vtgutils.vala
index 7e70a09..df46d38 100644
--- a/vtg/vtgutils.vala
+++ b/vtg/vtgutils.vala
@@ -400,7 +400,7 @@ namespace Vtg
 					_proposals[idx] = obj;
 				}*/
 			
-				icon_generic = IconTheme.get_default().load_icon(Gtk.Stock.FILE,16,IconLookupFlags.GENERIC_FALLBACK);
+				icon_generic = IconTheme.get_default().load_icon(Gtk.STOCK_FILE,16,IconLookupFlags.GENERIC_FALLBACK);
 				icon_field = new Gdk.Pixbuf.from_file (Utils.get_image_path ("element-field-16.png"));
 				icon_method = new Gdk.Pixbuf.from_file (Utils.get_image_path ("element-method-16.png"));
 				icon_class = new Gdk.Pixbuf.from_file (Utils.get_image_path ("element-class-16.png"));
@@ -491,15 +491,15 @@ namespace Vtg
 		{
 			switch (type) {
 				case TargetTypes.PROGRAM:
-					return Gtk.Stock.EXECUTE;
+					return Gtk.STOCK_EXECUTE;
 				case TargetTypes.LIBRARY:
-					return Gtk.Stock.EXECUTE;
+					return Gtk.STOCK_EXECUTE;
 				case TargetTypes.DATA:
-					return Gtk.Stock.DIRECTORY;
+					return Gtk.STOCK_DIRECTORY;
 				case TargetTypes.BUILT_SOURCES:
-					return Gtk.Stock.EXECUTE;
+					return Gtk.STOCK_EXECUTE;
 				default:
-					return Gtk.Stock.DIRECTORY;		
+					return Gtk.STOCK_DIRECTORY;		
 			}
 		}
 		
